{"ast":null,"code":"import { BehaviorSubject, combineLatest, map, mergeMap } from 'rxjs';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/movies.service\";\nimport * as i2 from \"src/app/services/shows.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../components/button/button.component\";\nimport * as i6 from \"../../components/fade-card/fade-card.component\";\nfunction HomeComponent_fade_card_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"fade-card\", 10);\n    i0.ɵɵlistener(\"click\", function HomeComponent_fade_card_13_Template_fade_card_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.navigate(item_r1.id));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"title\", item_r1.title || item_r1.original_name);\n    i0.ɵɵpropertyInterpolate(\"imageURL\", ctx_r0.IMAGE_API_URL + item_r1.poster_path);\n  }\n}\nexport class HomeComponent {\n  constructor(moviesService, showsService, router) {\n    this.moviesService = moviesService;\n    this.showsService = showsService;\n    this.router = router;\n    this.API_URL = API_URL;\n    this.IMAGE_API_URL = IMAGE_API_URL;\n    this.mode = initMode();\n    this.searchQuery = new BehaviorSubject('');\n    this.content = combineLatest([this.mode, this.searchQuery]).pipe(mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)\n      //localStorage.getItem('storedInput') != null ? (\n      //  mode === 'movies' ? this.moviesService.searchMovies(localStorage.getItem('storedInput')!) : this.showsService.searchShows(localStorage.getItem('storedInput')!)\n      //) : (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query))\n      ).pipe(map(data => data?.results)) : (mode === 'movies' ? this.moviesService.getTopRated() : this.showsService.getTopRated()).pipe(map(data => data?.results));\n    }));\n    this.setMode = val => {\n      this.mode.next(val);\n    };\n    this.onSearch = event => {\n      const query = event?.target?.value || '';\n      this.searchQuery.next(query);\n    };\n    this.navigate = id => {\n      localStorage.setItem('storedMode', this.mode.getValue());\n      localStorage.setItem('storedInput', this.searchQuery.getValue());\n      this.router.navigateByUrl('/article-details/' + this.mode.getValue() + '/' + id);\n    };\n    this.debouncedSearch = debounce(this.onSearch, 1000);\n  }\n  static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.MoviesService), i0.ɵɵdirectiveInject(i2.ShowsService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 15,\n    vars: 9,\n    consts: [[1, \"screen-container\", \"home-screen\"], [1, \"home-screen__buttons\"], [\"icon\", \"fa fa-film\", 3, \"isActive\", \"click\"], [\"icon\", \"fa fa-desktop\", 3, \"isActive\", \"click\"], [1, \"home-screen__search-bar\"], [1, \"search\", 3, \"input\"], [1, \"fa\", \"fa-search\", \"search__icon\"], [\"type\", \"text\", \"placeholder\", \"Search..\", 1, \"search__input\"], [1, \"home-screen__cards-container\"], [\"class\", \"home-screen__card\", 3, \"title\", \"imageURL\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"home-screen__card\", 3, \"title\", \"imageURL\", \"click\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"custom-button\", 2);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_2_listener() {\n          return ctx.setMode(\"movies\");\n        });\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵtext(4, \"Movies\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"custom-button\", 3);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_5_listener() {\n          return ctx.setMode(\"shows\");\n        });\n        i0.ɵɵpipe(6, \"async\");\n        i0.ɵɵtext(7, \"TV Shows\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"div\", 5);\n        i0.ɵɵlistener(\"input\", function HomeComponent_Template_div_input_9_listener($event) {\n          return ctx.debouncedSearch($event);\n        });\n        i0.ɵɵelement(10, \"i\", 6)(11, \"input\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 8);\n        i0.ɵɵtemplate(13, HomeComponent_fade_card_13_Template, 1, 2, \"fade-card\", 9);\n        i0.ɵɵpipe(14, \"async\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(3, 3, ctx.mode) === \"movies\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(6, 5, ctx.mode) === \"shows\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(14, 7, ctx.content));\n      }\n    },\n    dependencies: [i4.NgForOf, i5.ButtonComponent, i6.FadeCardComponent, i4.AsyncPipe],\n    styles: [\".home-screen[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  gap: 20px;\\n}\\n\\n.home-screen__cards-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.home-screen__card[_ngcontent-%COMP%] {\\n  flex: 1;\\n  padding: 1em;\\n}\\n\\n.search[_ngcontent-%COMP%] {\\n  position: relative;\\n  padding-left: 20px;\\n}\\n\\n.search__icon[_ngcontent-%COMP%] {\\n  position: absolute;\\n  left: 30px;\\n  top: 8px;\\n  padding: 2px;\\n}\\n\\n.search__input[_ngcontent-%COMP%] {\\n  padding: 6px;\\n  font-size: 19px;\\n  border: 1px solid black;\\n  border-radius: 100px;\\n  width: calc(100% - 17px);\\n  text-indent: 30px;\\n  min-width: max-content;\\n}\\n\\n.search__input[_ngcontent-%COMP%]:hover {\\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\n}\\n/*# sourceURL=webpack://./src/app/screens/home/home.component.sass */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2NyZWVucy9ob21lL2hvbWUuY29tcG9uZW50LnNhc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLFNBQUE7QUFDRjs7QUFDQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtBQUVGOztBQUFBO0VBQ0UsT0FBQTtFQUNBLFlBQUE7QUFHRjs7QUFEQTtFQUNFLGtCQUFBO0VBQ0Esa0JBQUE7QUFJRjs7QUFGQTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0FBS0Y7O0FBSEE7RUFDRSxZQUFBO0VBQ0EsZUFBQTtFQUNBLHVCQUFBO0VBQ0Esb0JBQUE7RUFDQSx3QkFBQTtFQUNBLGlCQUFBO0VBQ0Esc0JBQUE7QUFNRjs7QUFKQTtFQUNFLDZFQUFBO0FBT0YiLCJzb3VyY2VzQ29udGVudCI6WyIuaG9tZS1zY3JlZW4ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgZ2FwOiAyMHB4O1xufVxuXG4uaG9tZS1zY3JlZW5fX2NhcmRzLWNvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG59XG5cbi5ob21lLXNjcmVlbl9fY2FyZCB7XG4gIGZsZXg6IDE7XG4gIHBhZGRpbmc6IDFlbTtcbn1cblxuLnNlYXJjaCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgcGFkZGluZy1sZWZ0OiAyMHB4O1xufVxuXG4uc2VhcmNoX19pY29uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAzMHB4O1xuICB0b3A6IDhweDtcbiAgcGFkZGluZzogMnB4O1xufVxuXG4uc2VhcmNoX19pbnB1dCB7XG4gIHBhZGRpbmc6IDZweDtcbiAgZm9udC1zaXplOiAxOXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgYm9yZGVyLXJhZGl1czogMTAwcHg7XG4gIHdpZHRoOiBjYWxjKDEwMCUgLSAxN3B4KTtcbiAgdGV4dC1pbmRlbnQ6IDMwcHg7XG4gIG1pbi13aWR0aDogbWF4LWNvbnRlbnQ7XG59XG5cbi5zZWFyY2hfX2lucHV0OmhvdmVyIHtcbiAgYm94LXNoYWRvdzogMCA4cHggMTZweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCA2cHggMjBweCAwIHJnYmEoMCwgMCwgMCwgMC4xOSk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}\nfunction initMode() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode')) : new BehaviorSubject('shows');\n}\nfunction initSearchQuery() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode')) : new BehaviorSubject('shows');\n}","map":{"version":3,"mappings":"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","names":["BehaviorSubject","combineLatest","map","mergeMap","debounce","API_URL","IMAGE_API_URL","i0","HomeComponent","constructor","moviesService","showsService","router","initMode","mode","searchQuery","pipe","query","length","searchMovies","searchShows","data","results","getTopRated","val","next","event","target","value","id","localStorage","setItem","getValue","navigateByUrl","onSearch","selectors","decls","vars","consts","template","ctx","getItem","initSearchQuery"],"sourceRoot":"","sources":["C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.ts","C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, combineLatest, map, mergeMap } from 'rxjs';\nimport { MoviesService } from 'src/app/services/movies.service';\nimport { ShowsService } from 'src/app/services/shows.service';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\n\ntype ContentMode = 'movies' | 'shows';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.sass'],\n})\nexport class HomeComponent {\n  API_URL = API_URL;\n  IMAGE_API_URL = IMAGE_API_URL;\n\n  mode = initMode();\n  private searchQuery = new BehaviorSubject('');\n\n  content = combineLatest([this.mode, this.searchQuery]).pipe(\n    mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (\n        mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)\n        //localStorage.getItem('storedInput') != null ? (\n        //  mode === 'movies' ? this.moviesService.searchMovies(localStorage.getItem('storedInput')!) : this.showsService.searchShows(localStorage.getItem('storedInput')!)\n        //) : (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query))\n      ).pipe(map((data: any) => data?.results))\n      : (\n        mode === 'movies' ?  this.moviesService.getTopRated() :  this.showsService.getTopRated()\n      ).pipe(map((data: any) => data?.results));\n    }) \n  );\n\n  constructor(\n    private moviesService: MoviesService,\n    private showsService: ShowsService,\n    private router: Router\n  ) {}\n\n  setMode = (val: ContentMode) => {\n    this.mode.next(val);\n  }\n\n  onSearch = (event: any) => {\n    const query: string = event?.target?.value || ''\n    this.searchQuery.next(query);\n  }\n\n  navigate = (id: any) => {\n    localStorage.setItem('storedMode', this.mode.getValue());\n    localStorage.setItem('storedInput', this.searchQuery.getValue());\n    this.router.navigateByUrl('/article-details/' + this.mode.getValue() + '/' + id);\n  }\n\n  debouncedSearch = debounce(this.onSearch, 1000)\n}\n\nfunction initMode() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode') as ContentMode) : new BehaviorSubject('shows' as ContentMode);\n}\n\nfunction initSearchQuery() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode') as ContentMode) : new BehaviorSubject('shows' as ContentMode);\n}\n\n","<div class=\"screen-container home-screen\">\n    <div class=\"home-screen__buttons\">\n        <custom-button icon=\"fa fa-film\" [isActive]=\"(mode | async) === 'movies'\" (click)=\"setMode('movies')\">Movies</custom-button>\n        <custom-button icon=\"fa fa-desktop\" [isActive]=\"(mode | async) === 'shows'\" (click)=\"setMode('shows')\">TV Shows</custom-button>\n    </div>\n    <div class=\"home-screen__search-bar\">\n        <div class=\"search\" (input)=\"debouncedSearch($event)\">\n            <i class=\"fa fa-search search__icon\"></i>\n            <input class=\"search__input\" type=\"text\" placeholder=\"Search..\"/>\n        </div>\n        <!--search (input)=\"debouncedSearch($event)\"></search-->\n    </div>\n    <div class=\"home-screen__cards-container\">\n        <fade-card class=\"home-screen__card\"\n            *ngFor=\"let item of (content | async)\"\n            (click)=\"navigate(item.id)\"\n            title=\"{{item.title || item.original_name}}\"\n            imageURL=\"{{IMAGE_API_URL + item.poster_path}}\"\n        ></fade-card>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}