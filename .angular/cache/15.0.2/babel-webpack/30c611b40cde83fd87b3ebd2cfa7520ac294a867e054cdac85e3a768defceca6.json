{"ast":null,"code":"import { BehaviorSubject, combineLatest, map, mergeMap } from 'rxjs';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/movies.service\";\nimport * as i2 from \"src/app/services/shows.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../components/button/button.component\";\nimport * as i6 from \"../../components/search/search.component\";\nimport * as i7 from \"../../components/fade-card/fade-card.component\";\nfunction HomeComponent_fade_card_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"fade-card\", 9);\n    i0.ɵɵlistener(\"click\", function HomeComponent_fade_card_12_Template_fade_card_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.navigate(item_r1.id));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"title\", item_r1.title || item_r1.original_name);\n    i0.ɵɵpropertyInterpolate(\"imageURL\", ctx_r0.IMAGE_API_URL + item_r1.poster_path);\n  }\n}\nexport class HomeComponent {\n  constructor(moviesService, showsService, router) {\n    this.moviesService = moviesService;\n    this.showsService = showsService;\n    this.router = router;\n    this.API_URL = API_URL;\n    this.IMAGE_API_URL = IMAGE_API_URL;\n    this.mode = initMode();\n    this.searchQuery = new BehaviorSubject('');\n    this.content = combineLatest([this.mode, this.searchQuery]).pipe(mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)\n      //localStorage.getItem('storedInput') ? (\n      //  mode === 'movies' ? this.moviesService.searchMovies(localStorage.getItem('storedInput')!) : this.showsService.searchShows(localStorage.getItem('storedInput')!)\n      //) : (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query))\n      ).pipe(map(data => data?.results)) : (mode === 'movies' ? this.moviesService.getTopRated() : this.showsService.getTopRated()).pipe(map(data => data?.results));\n    }));\n    this.setMode = val => {\n      this.mode.next(val);\n    };\n    this.onSearch = event => {\n      const query = event?.target?.value || '';\n      this.searchQuery.next(query);\n    };\n    this.navigate = id => {\n      localStorage.setItem('storedMode', this.mode.getValue());\n      localStorage.setItem('storedInput', this.searchQuery.getValue());\n      this.router.navigateByUrl('/article-details/' + this.mode.getValue() + '/' + id);\n    };\n    this.debouncedSearch = debounce(this.onSearch, 1000);\n  }\n  static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.MoviesService), i0.ɵɵdirectiveInject(i2.ShowsService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 14,\n    vars: 9,\n    consts: [[1, \"toolbar\"], [1, \"screen-container\", \"home-screen\"], [1, \"home-screen__buttons\"], [\"icon\", \"fa fa-film\", 3, \"isActive\", \"click\"], [\"icon\", \"fa fa-desktop\", 3, \"isActive\", \"click\"], [1, \"home-screen__search-bar\"], [3, \"input\"], [1, \"home-screen__cards-container\"], [\"class\", \"home-screen__card\", 3, \"title\", \"imageURL\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"home-screen__card\", 3, \"title\", \"imageURL\", \"click\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"custom-button\", 3);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_3_listener() {\n          return ctx.setMode(\"movies\");\n        });\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵtext(5, \"Movies\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"custom-button\", 4);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_6_listener() {\n          return ctx.setMode(\"shows\");\n        });\n        i0.ɵɵpipe(7, \"async\");\n        i0.ɵɵtext(8, \"TV Shows\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 5)(10, \"search\", 6);\n        i0.ɵɵlistener(\"input\", function HomeComponent_Template_search_input_10_listener($event) {\n          return ctx.debouncedSearch($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵtemplate(12, HomeComponent_fade_card_12_Template, 1, 2, \"fade-card\", 8);\n        i0.ɵɵpipe(13, \"async\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(4, 3, ctx.mode) === \"movies\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(7, 5, ctx.mode) === \"shows\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(13, 7, ctx.content));\n      }\n    },\n    dependencies: [i4.NgForOf, i5.ButtonComponent, i6.SearchComponent, i7.FadeCardComponent, i4.AsyncPipe],\n    styles: [\".home-screen[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  gap: 20px;\\n}\\n\\n.home-screen__cards-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.home-screen__card[_ngcontent-%COMP%] {\\n  flex: 1;\\n  padding: 1em;\\n}\\n/*# sourceURL=webpack://./src/app/screens/home/home.component.sass */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2NyZWVucy9ob21lL2hvbWUuY29tcG9uZW50LnNhc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLFNBQUE7QUFDRjs7QUFDQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtBQUVGOztBQUFBO0VBQ0UsT0FBQTtFQUNBLFlBQUE7QUFHRiIsInNvdXJjZXNDb250ZW50IjpbIi5ob21lLXNjcmVlbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICBnYXA6IDIwcHg7XG59XG5cbi5ob21lLXNjcmVlbl9fY2FyZHMtY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtd3JhcDogd3JhcDtcbn1cblxuLmhvbWUtc2NyZWVuX19jYXJkIHtcbiAgZmxleDogMTtcbiAgcGFkZGluZzogMWVtO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}\nfunction initMode() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode')) : new BehaviorSubject('shows');\n}","map":{"version":3,"mappings":"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","names":["BehaviorSubject","combineLatest","map","mergeMap","debounce","API_URL","IMAGE_API_URL","i0","HomeComponent","constructor","moviesService","showsService","router","initMode","mode","searchQuery","pipe","query","length","searchMovies","searchShows","data","results","getTopRated","val","next","event","target","value","id","localStorage","setItem","getValue","navigateByUrl","onSearch","selectors","decls","vars","consts","template","ctx","getItem"],"sourceRoot":"","sources":["C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.ts","C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, combineLatest, map, mergeMap } from 'rxjs';\nimport { MoviesService } from 'src/app/services/movies.service';\nimport { ShowsService } from 'src/app/services/shows.service';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\n\ntype ContentMode = 'movies' | 'shows';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.sass'],\n})\nexport class HomeComponent {\n  API_URL = API_URL;\n  IMAGE_API_URL = IMAGE_API_URL;\n\n  mode = initMode();\n  private searchQuery = new BehaviorSubject('');\n\n  content = combineLatest([this.mode, this.searchQuery]).pipe(\n    mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (\n        mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)\n        //localStorage.getItem('storedInput') ? (\n        //  mode === 'movies' ? this.moviesService.searchMovies(localStorage.getItem('storedInput')!) : this.showsService.searchShows(localStorage.getItem('storedInput')!)\n        //) : (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query))\n      ).pipe(map((data: any) => data?.results))\n      : (\n        mode === 'movies' ?  this.moviesService.getTopRated() :  this.showsService.getTopRated()\n      ).pipe(map((data: any) => data?.results));\n    }) \n  );\n\n  constructor(\n    private moviesService: MoviesService,\n    private showsService: ShowsService,\n    private router: Router\n  ) {}\n\n  setMode = (val: ContentMode) => {\n    this.mode.next(val);\n  }\n\n  onSearch = (event: any) => {\n    const query: string = event?.target?.value || ''\n    this.searchQuery.next(query);\n  }\n\n  navigate = (id: any) => {\n    localStorage.setItem('storedMode', this.mode.getValue());\n    localStorage.setItem('storedInput', this.searchQuery.getValue());\n    this.router.navigateByUrl('/article-details/' + this.mode.getValue() + '/' + id);\n  }\n\n  debouncedSearch = debounce(this.onSearch, 1000)\n}\n\nfunction initMode() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode') as ContentMode) : new BehaviorSubject('shows' as ContentMode);\n}\n\n","\n    <div class=\"toolbar\">\n\n    </div>\n\n<div class=\"screen-container home-screen\">\n    <div class=\"home-screen__buttons\">\n        <custom-button icon=\"fa fa-film\" [isActive]=\"(mode | async) === 'movies'\" (click)=\"setMode('movies')\">Movies</custom-button>\n        <custom-button icon=\"fa fa-desktop\" [isActive]=\"(mode | async) === 'shows'\" (click)=\"setMode('shows')\">TV Shows</custom-button>\n    </div>\n    <div class=\"home-screen__search-bar\">\n        <search (input)=\"debouncedSearch($event)\"></search>\n    </div>\n    <div class=\"home-screen__cards-container\">\n        <fade-card class=\"home-screen__card\"\n            *ngFor=\"let item of (content | async)\"\n            (click)=\"navigate(item.id)\"\n            title=\"{{item.title || item.original_name}}\"\n            imageURL=\"{{IMAGE_API_URL + item.poster_path}}\"\n        ></fade-card>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}