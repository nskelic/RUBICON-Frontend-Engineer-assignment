{"ast":null,"code":"import { BehaviorSubject, combineLatest, map, mergeMap } from 'rxjs';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/movies.service\";\nimport * as i2 from \"src/app/services/shows.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../components/button/button.component\";\nimport * as i6 from \"../../components/card/card.component\";\nimport * as i7 from \"../../components/search/search.component\";\nfunction HomeComponent_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"card\", 8);\n    i0.ɵɵlistener(\"click\", function HomeComponent_card_11_Template_card_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.navigate(item_r1.id));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"title\", item_r1.title || item_r1.original_name);\n    i0.ɵɵpropertyInterpolate(\"imageURL\", ctx_r0.IMAGE_API_URL + item_r1.poster_path);\n  }\n}\nexport class HomeComponent {\n  constructor(moviesService, showsService, router) {\n    this.moviesService = moviesService;\n    this.showsService = showsService;\n    this.router = router;\n    this.API_URL = API_URL;\n    this.IMAGE_API_URL = IMAGE_API_URL;\n    this.mode = initMode();\n    this.searchQuery = new BehaviorSubject('');\n    this.s = initSearchQuery();\n    this.content = combineLatest([this.mode, this.searchQuery]).pipe(mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)).pipe(map(data => data?.results)) : (mode === 'movies' ? this.moviesService.getTopRated() : this.showsService.getTopRated()).pipe(map(data => data?.results));\n    }));\n    this.setMode = val => {\n      this.mode.next(val);\n    };\n    this.onSearch = event => {\n      const query = event?.target?.value || '';\n      this.searchQuery.next(query);\n    };\n    this.navigate = id => {\n      localStorage.setItem('storedMode', this.mode.getValue());\n      localStorage.setItem('storedInput', this.searchQuery.getValue());\n      this.router.navigateByUrl('/article-details/' + this.mode + '/' + id);\n    };\n    this.debouncedSearch = debounce(this.onSearch, 1000);\n  }\n  ngOnInit() {}\n  static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.MoviesService), i0.ɵɵdirectiveInject(i2.ShowsService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 13,\n    vars: 9,\n    consts: [[1, \"screen-container\", \"home-screen\"], [1, \"home-screen__buttons\"], [\"icon\", \"fa fa-film\", 3, \"isActive\", \"click\"], [\"icon\", \"fa fa-desktop\", 3, \"isActive\", \"click\"], [1, \"home-screen__search-bar\"], [3, \"input\"], [1, \"home-screen__cards-container\"], [3, \"title\", \"imageURL\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"title\", \"imageURL\", \"click\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"custom-button\", 2);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_2_listener() {\n          return ctx.setMode(\"movies\");\n        });\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵtext(4, \"Movies\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"custom-button\", 3);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_5_listener() {\n          return ctx.setMode(\"shows\");\n        });\n        i0.ɵɵpipe(6, \"async\");\n        i0.ɵɵtext(7, \"TV Shows\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"search\", 5);\n        i0.ɵɵlistener(\"input\", function HomeComponent_Template_search_input_9_listener($event) {\n          return ctx.debouncedSearch($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵtemplate(11, HomeComponent_card_11_Template, 1, 2, \"card\", 7);\n        i0.ɵɵpipe(12, \"async\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(3, 3, ctx.mode) === \"movies\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(6, 5, ctx.mode) === \"shows\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(12, 7, ctx.content));\n      }\n    },\n    dependencies: [i4.NgForOf, i5.ButtonComponent, i6.CardComponent, i7.SearchComponent, i4.AsyncPipe],\n    styles: [\".home-screen[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  gap: 20px;\\n}\\n\\n.home-screen__cards-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: space-around;\\n}\\n/*# sourceURL=webpack://./src/app/screens/home/home.component.sass */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2NyZWVucy9ob21lL2hvbWUuY29tcG9uZW50LnNhc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLFNBQUE7QUFDRjs7QUFDQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtFQUNBLDZCQUFBO0FBRUYiLCJzb3VyY2VzQ29udGVudCI6WyIuaG9tZS1zY3JlZW4ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgZ2FwOiAyMHB4O1xufVxuXG4uaG9tZS1zY3JlZW5fX2NhcmRzLWNvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}\nfunction initMode() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode')) : new BehaviorSubject('shows');\n}\nfunction initSearchQuery() {\n  return localStorage.getItem('storedInput');\n}","map":{"version":3,"mappings":"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","names":["BehaviorSubject","combineLatest","map","mergeMap","debounce","API_URL","IMAGE_API_URL","i0","HomeComponent","constructor","moviesService","showsService","router","initMode","initSearchQuery","mode","searchQuery","pipe","query","length","searchMovies","searchShows","data","results","getTopRated","val","next","event","target","value","id","localStorage","setItem","getValue","navigateByUrl","onSearch","ngOnInit","selectors","decls","vars","consts","template","ctx","getItem"],"sourceRoot":"","sources":["C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.ts","C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, combineLatest, map, merge, mergeMap } from 'rxjs';\nimport { MoviesService } from 'src/app/services/movies.service';\nimport { ShowsService } from 'src/app/services/shows.service';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\n\ntype ContentMode = 'movies' | 'shows';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.sass'],\n})\nexport class HomeComponent implements OnInit {\n  API_URL = API_URL;\n  IMAGE_API_URL = IMAGE_API_URL;\n\n  mode = initMode();\n  private searchQuery = new BehaviorSubject('');\n  private s = initSearchQuery();\n\n  content = combineLatest([this.mode, this.searchQuery]).pipe(\n    mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (\n        mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)\n      ).pipe(map((data: any) => data?.results))\n      : (\n        mode === 'movies' ?  this.moviesService.getTopRated() :  this.showsService.getTopRated()\n      ).pipe(map((data: any) => data?.results));\n    }) \n  );\n\n  constructor(\n    private moviesService: MoviesService,\n    private showsService: ShowsService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {}\n\n  setMode = (val: ContentMode) => {\n    this.mode.next(val);\n  }\n\n  onSearch = (event: any) => {\n    const query: string = event?.target?.value || ''\n    this.searchQuery.next(query);\n  }\n\n  navigate = (id: any) => {\n    localStorage.setItem('storedMode', this.mode.getValue());\n    localStorage.setItem('storedInput', this.searchQuery.getValue());\n    this.router.navigateByUrl('/article-details/' + this.mode + '/' + id);\n  }\n\n  debouncedSearch = debounce(this.onSearch, 1000)\n}\n\nfunction initMode() {\n  return localStorage.getItem('storedMode') ? new BehaviorSubject(localStorage.getItem('storedMode') as ContentMode) : new BehaviorSubject('shows' as ContentMode);\n}\n\nfunction initSearchQuery(this: any) {\n  return localStorage.getItem('storedInput');\n}\n\n","<div class=\"screen-container home-screen\">\n    <div class=\"home-screen__buttons\">\n        <custom-button icon=\"fa fa-film\" [isActive]=\"(mode | async) === 'movies'\" (click)=\"setMode('movies')\">Movies</custom-button>\n        <custom-button icon=\"fa fa-desktop\" [isActive]=\"(mode | async) === 'shows'\" (click)=\"setMode('shows')\">TV Shows</custom-button>\n    </div>\n    <div class=\"home-screen__search-bar\">\n        <search (input)=\"debouncedSearch($event)\"></search>\n    </div>\n    <div class=\"home-screen__cards-container\">\n        <card\n            *ngFor=\"let item of (content | async)\"\n            (click)=\"navigate(item.id)\"\n            title=\"{{item.title || item.original_name}}\"\n            imageURL=\"{{IMAGE_API_URL + item.poster_path}}\"\n        ></card>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}