{"ast":null,"code":"import { combineLatest, map, mergeMap } from 'rxjs';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/movies.service\";\nimport * as i2 from \"src/app/services/shows.service\";\nimport * as i3 from \"src/app/services/data.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../../components/button/button.component\";\nimport * as i7 from \"../../components/card/card.component\";\nimport * as i8 from \"../../components/search/search.component\";\nfunction HomeComponent_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"card\", 8);\n    i0.ɵɵpipe(1, \"async\");\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"title\", item_r1.title || item_r1.original_name);\n    i0.ɵɵpropertyInterpolate(\"imageURL\", ctx_r0.IMAGE_API_URL + item_r1.poster_path);\n    i0.ɵɵproperty(\"routerLink\", \"/article-details/\" + i0.ɵɵpipeBind1(1, 3, ctx_r0.mode) + \"/\" + item_r1.id);\n  }\n}\nexport class HomeComponent {\n  constructor(moviesService, showsService, dataService) {\n    this.moviesService = moviesService;\n    this.showsService = showsService;\n    this.dataService = dataService;\n    this.API_URL = API_URL;\n    this.IMAGE_API_URL = IMAGE_API_URL;\n    this.mode = this.dataService.mode;\n    this.searchQuery = this.dataService.searchQuery;\n    this.content = combineLatest([this.mode, this.searchQuery]).pipe(mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)).pipe(map(data => data?.results)) : (mode === 'movies' ? this.moviesService.getTopRated() : this.showsService.getTopRated()).pipe(map(data => data?.results));\n    }));\n    this.setMode = val => {\n      this.mode.next(val);\n      this.dataService.mode.next(val);\n    };\n    this.onSearch = event => {\n      const query = event?.target?.value || '';\n      this.searchQuery.next(query);\n      this.dataService.searchQuery.next(query);\n    };\n    this.debouncedSearch = debounce(this.onSearch, 1000);\n  }\n  ngOnInit() {}\n  static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.MoviesService), i0.ɵɵdirectiveInject(i2.ShowsService), i0.ɵɵdirectiveInject(i3.DataService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 13,\n    vars: 9,\n    consts: [[1, \"screen-container\", \"home-screen\"], [1, \"home-screen__buttons\"], [\"icon\", \"fa fa-film\", 3, \"isActive\", \"click\"], [\"icon\", \"fa fa-desktop\", 3, \"isActive\", \"click\"], [1, \"home-screen__search-bar\"], [3, \"input\"], [1, \"home-screen__cards-container\"], [3, \"routerLink\", \"title\", \"imageURL\", 4, \"ngFor\", \"ngForOf\"], [3, \"routerLink\", \"title\", \"imageURL\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"custom-button\", 2);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_2_listener() {\n          return ctx.setMode(\"movies\");\n        });\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵtext(4, \"Movies\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"custom-button\", 3);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_custom_button_click_5_listener() {\n          return ctx.setMode(\"shows\");\n        });\n        i0.ɵɵpipe(6, \"async\");\n        i0.ɵɵtext(7, \"TV Shows\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"search\", 5);\n        i0.ɵɵlistener(\"input\", function HomeComponent_Template_search_input_9_listener($event) {\n          return ctx.debouncedSearch($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵtemplate(11, HomeComponent_card_11_Template, 2, 5, \"card\", 7);\n        i0.ɵɵpipe(12, \"async\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(3, 3, ctx.mode) === \"movies\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"isActive\", i0.ɵɵpipeBind1(6, 5, ctx.mode) === \"shows\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(12, 7, ctx.content));\n      }\n    },\n    dependencies: [i4.NgForOf, i5.RouterLink, i6.ButtonComponent, i7.CardComponent, i8.SearchComponent, i4.AsyncPipe],\n    styles: [\".home-screen[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  gap: 20px;\\n}\\n\\n.home-screen__cards-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: space-around;\\n}\\n/*# sourceURL=webpack://./src/app/screens/home/home.component.sass */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2NyZWVucy9ob21lL2hvbWUuY29tcG9uZW50LnNhc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLFNBQUE7QUFDRjs7QUFDQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsZUFBQTtFQUNBLDZCQUFBO0FBRUYiLCJzb3VyY2VzQ29udGVudCI6WyIuaG9tZS1zY3JlZW4ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgZ2FwOiAyMHB4O1xufVxuXG4uaG9tZS1zY3JlZW5fX2NhcmRzLWNvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"AACA,SAA0BA,aAAa,EAAEC,GAAG,EAASC,QAAQ,QAAQ,MAAM;AAI3E,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,OAAO,EAAEC,aAAa,QAAQ,YAAY;;;;;;;;;;;;ICG3CC,0BAKQ;;;;;;IAFJA,yEAA4C;IAC5CA,gFAA+C;IAF/CA,uGAAmE;;;ADI/E,OAAM,MAAOC,aAAa;EAkBxBC,YACUC,aAA4B,EAC5BC,YAA0B,EAC1BC,WAAwB;IAFxB,kBAAa,GAAbF,aAAa;IACb,iBAAY,GAAZC,YAAY;IACZ,gBAAW,GAAXC,WAAW;IApBrB,YAAO,GAAGP,OAAO;IACjB,kBAAa,GAAGC,aAAa;IAE7B,SAAI,GAAG,IAAI,CAACM,WAAW,CAACC,IAAI;IACpB,gBAAW,GAAG,IAAI,CAACD,WAAW,CAACE,WAAW;IAElD,YAAO,GAAGb,aAAa,CAAC,CAAC,IAAI,CAACY,IAAI,EAAE,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,IAAI,CACzDZ,QAAQ,CAAC,CAAC,CAACU,IAAI,EAAEG,KAAK,CAAC,KAAI;MACzB,OAAOA,KAAK,EAAEC,MAAM,GAAG,CAAC,GAAG,CACzBJ,IAAI,KAAK,QAAQ,GAAG,IAAI,CAACH,aAAa,CAACQ,YAAY,CAACF,KAAK,CAAC,GAAG,IAAI,CAACL,YAAY,CAACQ,WAAW,CAACH,KAAK,CAAC,EACjGD,IAAI,CAACb,GAAG,CAAEkB,IAAS,IAAKA,IAAI,EAAEC,OAAO,CAAC,CAAC,GACvC,CACAR,IAAI,KAAK,QAAQ,GAAI,IAAI,CAACH,aAAa,CAACY,WAAW,EAAE,GAAI,IAAI,CAACX,YAAY,CAACW,WAAW,EAAE,EACxFP,IAAI,CAACb,GAAG,CAAEkB,IAAS,IAAKA,IAAI,EAAEC,OAAO,CAAC,CAAC;IAC3C,CAAC,CAAC,CACH;IAUD,YAAO,GAAIE,GAAgB,IAAI;MAC7B,IAAI,CAACV,IAAI,CAACW,IAAI,CAACD,GAAG,CAAC;MACnB,IAAI,CAACX,WAAW,CAACC,IAAI,CAACW,IAAI,CAACD,GAAG,CAAC;IACjC,CAAC;IAED,aAAQ,GAAIE,KAAU,IAAI;MACxB,MAAMT,KAAK,GAAWS,KAAK,EAAEC,MAAM,EAAEC,KAAK,IAAI,EAAE;MAChD,IAAI,CAACb,WAAW,CAACU,IAAI,CAACR,KAAK,CAAC;MAC5B,IAAI,CAACJ,WAAW,CAACE,WAAW,CAACU,IAAI,CAACR,KAAK,CAAC;IAC1C,CAAC;IAED,oBAAe,GAAGZ,QAAQ,CAAC,IAAI,CAACwB,QAAQ,EAAE,IAAI,CAAC;EAf5C;EAEHC,QAAQ,IAAU;EAAC;qBAxBRrB,aAAa;EAAA;EAAA;UAAbA,aAAa;IAAAsB;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCf1B3B,8BAA0C;QAEwCA;UAAA,OAAS4B,YAAQ,QAAQ,CAAC;QAAA,EAAC;;QAAC5B,sBAAM;QAAAA,iBAAgB;QAC5HA,wCAAuG;QAA3BA;UAAA,OAAS4B,YAAQ,OAAO,CAAC;QAAA,EAAC;;QAAC5B,wBAAQ;QAAAA,iBAAgB;QAEnIA,8BAAqC;QACzBA;UAAA,OAAS4B,2BAAuB;QAAA,EAAC;QAAC5B,iBAAS;QAEvDA,+BAA0C;QACtCA,kEAKQ;;QACZA,iBAAM;;;QAb+BA,eAAwC;QAAxCA,sEAAwC;QACrCA,eAAuC;QAAvCA,qEAAuC;QAOtDA,eAAoB;QAApBA,4DAAoB","names":["combineLatest","map","mergeMap","debounce","API_URL","IMAGE_API_URL","i0","HomeComponent","constructor","moviesService","showsService","dataService","mode","searchQuery","pipe","query","length","searchMovies","searchShows","data","results","getTopRated","val","next","event","target","value","onSearch","ngOnInit","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.ts","C:\\Users\\nejla\\Desktop\\b\\src\\app\\screens\\home\\home.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BehaviorSubject, combineLatest, map, merge, mergeMap } from 'rxjs';\nimport { DataService } from 'src/app/services/data.service';\nimport { MoviesService } from 'src/app/services/movies.service';\nimport { ShowsService } from 'src/app/services/shows.service';\nimport { debounce } from 'src/app/utils';\nimport { API_URL, IMAGE_API_URL } from 'src/config';\n\ntype ContentMode = 'movies' | 'shows';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.sass'],\n})\nexport class HomeComponent implements OnInit {\n  API_URL = API_URL;\n  IMAGE_API_URL = IMAGE_API_URL;\n\n  mode = this.dataService.mode;\n  private searchQuery = this.dataService.searchQuery;\n\n  content = combineLatest([this.mode, this.searchQuery]).pipe(\n    mergeMap(([mode, query]) => {\n      return query?.length > 2 ? (\n        mode === 'movies' ? this.moviesService.searchMovies(query) : this.showsService.searchShows(query)\n      ).pipe(map((data: any) => data?.results))\n      : (\n        mode === 'movies' ?  this.moviesService.getTopRated() :  this.showsService.getTopRated()\n      ).pipe(map((data: any) => data?.results));\n    }) \n  );\n\n  constructor(\n    private moviesService: MoviesService,\n    private showsService: ShowsService,\n    private dataService: DataService\n  ) {}\n\n  ngOnInit(): void {}\n\n  setMode = (val: ContentMode) => {\n    this.mode.next(val);\n    this.dataService.mode.next(val);\n  }\n\n  onSearch = (event: any) => {\n    const query: string = event?.target?.value || ''\n    this.searchQuery.next(query);\n    this.dataService.searchQuery.next(query);\n  }\n\n  debouncedSearch = debounce(this.onSearch, 1000)\n}\n","<div class=\"screen-container home-screen\">\n    <div class=\"home-screen__buttons\">\n        <custom-button icon=\"fa fa-film\" [isActive]=\"(mode | async) === 'movies'\" (click)=\"setMode('movies')\">Movies</custom-button>\n        <custom-button icon=\"fa fa-desktop\" [isActive]=\"(mode | async) === 'shows'\" (click)=\"setMode('shows')\">TV Shows</custom-button>\n    </div>\n    <div class=\"home-screen__search-bar\">\n        <search (input)=\"debouncedSearch($event)\"></search>\n    </div>\n    <div class=\"home-screen__cards-container\">\n        <card\n            *ngFor=\"let item of (content | async)\"\n            [routerLink]=\"'/article-details/' + (mode | async) + '/' + item.id\"\n            title=\"{{item.title || item.original_name}}\"\n            imageURL=\"{{IMAGE_API_URL + item.poster_path}}\"\n        ></card>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}